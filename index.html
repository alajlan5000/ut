
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù‚Ø±ÙˆØ¨Ø§Øª Ø§Ù„Ø´Ø¹Ø¨ Ù„Ø¬Ø§Ù…Ø¹Ø© ØªØ¨ÙˆÙƒ</title>
<style>
body { font-family:"Tahoma",sans-serif; background:linear-gradient(to bottom,#dff1ff,#f8fbff); margin:0; padding:0; color:#25A4F8; }
header { display:flex; align-items:center; justify-content:space-between; padding:20px 10%; background:#fff; border-radius:0 0 30px 30px; box-shadow:0 8px 20px rgba(0,0,0,.15); }
header h1 { font-size:28px; margin:0; color:#1e90ff; }
.hero { display:flex; align-items:center; justify-content:space-between; padding:30px 10%; margin:20px 0; background:#fff; border-radius:14px; box-shadow:0 4px 12px rgba(0,0,0,.08); }
.hero-text { max-width:50%; }
.hero-text h2 { font-size:28px; color:#1e90ff; margin-bottom:10px; }
.hero-text p { font-size:16px; line-height:1.6; margin-bottom:15px; }
.features { display:flex; justify-content:center; gap:15px; padding:20px 10%; }
.feature { flex:1; background:#fff; padding:15px; border-radius:12px; box-shadow:0 3px 8px rgba(0,0,0,.1); text-align:center; }
.feature h3 { color:#1e90ff; margin-bottom:8px; font-size:18px; }
.feature p { font-size:14px; color:#555; }
.cards { display:flex; flex-direction:column; gap:20px; padding:0 10%; margin-bottom:20px; }
.card { background:#fff; padding:20px; border-radius:18px; box-shadow:0 4px 12px rgba(0,0,0,.08); }
.card h2 { margin-bottom:15px; font-size:20px; color:#34495e; border-right:4px solid #3498db; padding-right:10px; }
input, select, button { padding:12px; margin:5px 0; border-radius:12px; border:1px solid #ddd; font-size:14px; width:100%; box-sizing:border-box; }
input:focus, select:focus { border-color:#3498db; outline:none; box-shadow:0 0 5px rgba(52,152,219,.4); }
button { background:#3498db; color:#fff; border:none; cursor:pointer; font-weight:bold; transition:.3s; }
button:hover { background:#2980b9; }
.groups { padding:20px 10%; margin-bottom:30px; }
.groups h2 { color:#1e90ff; margin-bottom:15px; }
.group-list { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:15px; }
.group-card { background:#fefefe; border:1px solid #e1e1e1; border-radius:16px; padding:15px; text-align:right; transition:.3s; }
.group-card:hover { transform:translateY(-5px); box-shadow:0 8px 18px rgba(0,0,0,.1); }
.group-card h3 { margin:0; font-size:17px; color:#2c3e50; }
.group-card p { margin:5px 0; font-size:14px; color:#555; }
.group-card a { display:inline-block; margin-top:10px; text-decoration:none; padding:8px 12px; border-radius:10px; font-size:14px; background:#2ecc71; color:white; transition:.3s; }
.group-card a:hover { background:#27ae60; }
.group-card button.edit-btn { margin-top:10px; padding:5px 10px; font-size:12px; border-radius:8px; cursor:pointer; border:none; background:#f39c12; color:#fff; }
.group-card button.edit-btn:hover { background:#e67e22; }
.empty { text-align:center; color:#888; font-style:italic; padding:15px; }
footer { background:#fff; text-align:center; padding:15px; font-size:14px; color:#555; box-shadow:0 -2px 6px rgba(0,0,0,0.05); }
@media (max-width:768px){
  .hero { flex-direction:column; padding:20px; }
  .hero-text { max-width:100%; text-align:center; }
  .features { flex-direction:column; }
  .feature { width:100%; margin-bottom:10px; }
  .group-list { grid-template-columns:1fr; }
}
</style>
</head>
<body>

<header>
  <h1>ğŸ“š Ø§Ù„Ø´Ø¹Ø¨</h1>
</header>

<section class="hero">
  <div class="hero-text">
        <h2> Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ø¬Ù„Ø§Ù† </h2>
    <h2>ÙƒÙ„ Ø§Ù„Ø´Ø¹Ø¨ ÙˆØ§Ù„ØªØ®ØµØµØ§Øª ÙÙŠ Ù…ÙƒØ§Ù† ÙˆØ§Ø­Ø¯ âœ¨</h2>
    <p>Ø§Ø¨Ø­Ø« Ø¹Ù† Ø´Ø¹Ø¨ØªÙƒ Ø£Ùˆ Ø£Ø¶Ù/Ø¹Ø¯Ù„ Ù‚Ø±ÙˆØ¨Ùƒ Ø¨Ø³Ù‡ÙˆÙ„Ø© ğŸš€<br>ÙƒÙ„ Ø´ÙŠØ¡ Ù…Ù†Ø¸Ù… ÙˆÙ…Ø±ØªØ¨ Ù„ÙŠØ³Ù‡Ù„ Ø§Ù„ÙˆØµÙˆÙ„ ÙˆØ§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø²Ù…Ù„Ø§Ø¦Ùƒ.</p>
  </div>
  <img src="https://i.imgur.com/TIgRFoV.png" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹">
</section>

<section class="features">
  <div class="feature">
    <h3>âš¡ Ø³Ø±Ø¹Ø© Ø§Ù„ÙˆØµÙˆÙ„</h3>
    <p>Ø§Ø¨Ø­Ø« Ø¹Ù† Ø´Ø¹Ø¨Ø© Ø£Ùˆ ØªØ®ØµØµÙƒ Ø®Ù„Ø§Ù„ Ø«ÙˆØ§Ù†Ù.</p>
  </div>
  <div class="feature">
    <h3>ğŸ¤ Ù…Ø´Ø§Ø±ÙƒØ© Ø³Ù‡Ù„Ø©</h3>
    <p>Ø£Ø¶Ù Ù‚Ø±ÙˆØ¨Ùƒ ÙˆØ´Ø§Ø±ÙƒÙ‡ Ù…Ø¹ Ø²Ù…Ù„Ø§Ø¦Ùƒ Ø¨Ø³Ù‡ÙˆÙ„Ø©.</p>
  </div>
  <div class="feature">
    <h3>ğŸ¯ ØªÙ†Ø¸ÙŠÙ… Ø£ÙØ¶Ù„</h3>
    <p>ÙƒÙ„ Ø§Ù„Ù‚Ø±ÙˆØ¨Ø§Øª Ù…Ø±ØªØ¨Ø© Ø­Ø³Ø¨ Ø§Ù„Ø´Ø¹Ø¨ ÙˆØ§Ù„ØªØ®ØµØµØ§Øª.</p>
  </div>
</section>

<div class="cards">
  <div class="card">
    <h2>ğŸ” Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ„ØªØ±Ø©</h2>
    <select id="filterMajor">
      <option value="">Ø§Ø®ØªØ± Ø§Ù„ØªØ®ØµØµ</option>
    </select>
    <button onclick="filterGroups()">Ø¨Ø­Ø«</button>
  </div>

  <div class="card">
    <h2>â• Ø¥Ø¶Ø§ÙØ© / ØªØ¹Ø¯ÙŠÙ„ Ù‚Ø±ÙˆØ¨</h2>
    <form id="addForm" onsubmit="addGroup(event)">
      <select id="course" required>
        <option value="">Ø§Ø®ØªØ± Ø§Ù„ØªØ®ØµØµ</option>
      </select>
      <input type="text" id="section" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø´Ø¹Ø¨Ø©" required>
      <input type="text" id="subject" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù‚Ø±Ø±" required>
      <input type="url" id="link" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ù‚Ø±ÙˆØ¨" required>
      <button type="submit" id="submitBtn">Ø¥Ø±Ø³Ø§Ù„ âœ…</button>
    </form>
  </div>
</div>

<section class="groups">
  <h2>ğŸ“Œ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ø±ÙˆØ¨Ø§Øª</h2>
  <div class="group-list" id="groupsList">
    <p class="empty">ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø´Ø¹Ø¨Ø© Ø£Ùˆ Ø§Ø®ØªØ± Ø§Ù„ØªØ®ØµØµ</p>
  </div>
</section>

<footer>
  Â© 2025 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© -alajlan
</footer>

<script>
const BASE_URL = "https://x8ki-letl-twmt.n7.xano.io/api:Xiw-CLaJ/groups";
let groupsData = [];
let editModeId = null;

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø±ÙˆØ¨Ø§Øª ÙˆØ§Ù„ØªØ®ØµØµØ§Øª
async function fetchGroups() {
  try {
    const response = await fetch(BASE_URL);
    groupsData = await response.json();

    const filterSelect = document.getElementById("filterMajor");
    const addSelect = document.getElementById("course");

    filterSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„ØªØ®ØµØµ</option>';
    addSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„ØªØ®ØµØµ</option>';

    let majors = [...new Set(groupsData.map(g => g.Major).filter(m => m && m.trim() !== ""))];

    majors.forEach(m => {
      const opt1 = document.createElement("option");
      opt1.value = m;
      opt1.textContent = m;
      filterSelect.appendChild(opt1);

      const opt2 = document.createElement("option");
      opt2.value = m;
      opt2.textContent = m;
      addSelect.appendChild(opt2);
    });

    filterGroups();
  } catch (err) {
    console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù‚Ø±ÙˆØ¨Ø§Øª:", err);
  }
}

// Ø¹Ø±Ø¶ ÙˆØªØµÙÙŠØ© Ø§Ù„Ù‚Ø±ÙˆØ¨Ø§Øª
function filterGroups() {
  const selectedMajor = document.getElementById("filterMajor").value.trim();
  const container = document.getElementById("groupsList");
  container.innerHTML = "";

  const filtered = groupsData.filter(g => !selectedMajor || g.Major === selectedMajor);

  if (filtered.length > 0) {
    filtered.forEach(g => {
      container.innerHTML += `
        <div class="group-card">
          <h3>${g.Course}</h3>
          <p>Ø§Ù„Ø´Ø¹Ø¨Ø©: ${g.Section}</p>
          <p>Ø§Ù„ØªØ®ØµØµ: ${g.Major}</p>
          <a href="${g.Link}" target="_blank">Ø§Ù†Ø¶Ù…</a>
          <button class="edit-btn" onclick='editGroup(${g.id})'>ØªØ¹Ø¯ÙŠÙ„</button>
        </div>
      `;
    });
  } else {
    container.innerHTML = "<p class='empty'>âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù‚Ø±ÙˆØ¨Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„ØªØ®ØµØµ</p>";
  }
}

// Ø¥Ø¶Ø§ÙØ© Ø£Ùˆ ØªØ¹Ø¯ÙŠÙ„ Ù‚Ø±ÙˆØ¨
async function addGroup(event) {
  event.preventDefault();
  const Major = document.getElementById("course").value.trim();
  const Section = document.getElementById("section").value.trim();
  const Course = document.getElementById("subject").value.trim();
  const Link = document.getElementById("link").value.trim();

  if (!Major || !Section || !Course || !Link) {
    alert("Ø§ÙƒÙ…Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");
    return;
  }

  const body = { Major, Section, Course, Link };

  try {
    let result;
    if (editModeId !== null) {
      // PATCH Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¬Ù„
      const res = await fetch(`${BASE_URL}/${editModeId}`, {
        method: "PATCH",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(body)
      });
      result = await res.json();
      const idx = groupsData.findIndex(g => g.id === editModeId);
      if (idx >= 0) groupsData[idx] = result;
      editModeId = null;
      document.getElementById("submitBtn").innerText = "Ø¥Ø±Ø³Ø§Ù„ âœ…";
      alert("âœ… ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­");
    } else {
      // POST Ù„Ø¥Ø¶Ø§ÙØ© Ø³Ø¬Ù„ Ø¬Ø¯ÙŠØ¯
      const res = await fetch(BASE_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(body)
      });
      result = await res.json();
      groupsData.push(result);
      alert("âœ… ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¬Ø§Ø­");
    }

    document.getElementById("addForm").reset();
    fetchGroups();
  } catch (err) {
    console.error("Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:", err);
    alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©");
  }
}

// ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
function editGroup(id) {
  const group = groupsData.find(g => g.id === id);
  if (!group) return;

  document.getElementById("course").value = group.Major;
  document.getElementById("section").value = group.Section;
  document.getElementById("subject").value = group.Course;
  document.getElementById("link").value = group.Link;
  editModeId = group.id;
  document.getElementById("submitBtn").innerText = "ØªØ¹Ø¯ÙŠÙ„ âœï¸";
  window.scrollTo(0, 0);
}

fetchGroups();
</script>

</body>
</html>

